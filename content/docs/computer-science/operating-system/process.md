---
title: 进程
weight: 200
math: false
---

- **进程**
    - **定义**
        - 进程是程序的一次执行过程，是程序在一个数据集合上顺序执行时发生的活动。
        - OS 用进程描述系统的并发活动。
    - **特性**
        - 动态性：进程是一次执行过程，是临时的，具有生命周期。
        - 独立性：进程是系统进行资源分配和调度的独立单元，进程之间相对隔离。
        - 并发性：多个进程可以交替执行。
        - 结构性：OS 为每个进程建立进程控制块（PCB），结构化地描述进程信息。
    - **与程序的区别**
        - 程序是静态、永久的，进程是动态、暂时的。
        - 程序一般可以在计算机之间迁移，进程只有在一个 OS 的范围内。
        - 进程包括程序、数据、PCB。
        - 一个程序多次执行可以对应多个进程，一个进程可以通过调用包括多个程序。
        - 进程可以创建进程，程序自身不能产生新程序。
- **PCB**
    - **定义**
        - PCB 是进程的唯一标识，也包括进程的各种信息。
    - **内容**
        - 进程标识数/PID：区分不同进程的 ID。
            - 可以有外部标识符，提供用户使用。
        - 状态、调度、存储器管理信息：调度所需的必要信息
            - 状态：描述进程所处的生命周期阶段。
            - 调度：优先级等。
            - 存储器：程序在主存、外存的地址等。
        - 资源：使用的设备、打开的文件等资源。
        - CPU 现场保护区：执行时的 CPU 上下文，包括各种寄存器、程序状态字等
        - 记账信息：使用 CPU 时间量、运行的用户等。
        - 家族关系：记录父子进程信息。Windows 无。
        - 进程链接指针：记录相同状态的进程（如兄弟进程）。
    - **实现**
        - PCB 可能拆分，如 Windows 使用 `EPROCESS` 表示 PCB，其中包含 `KPROCESS`，仅内核使用。
    - **状态**
        - **分类**
            - 创建态：进程刚被创建，还进入就绪态，没有被调度。
            - 运行态：正在 CPU 上运行。
            - 阻塞态：正在等待某些资源，无法继续运行。
            - 就绪态：不在 CPU 上运行，但是没有等待的资源，可以随时被 CPU 继续执行。
            - 终止态：进程已经正常或异常结束，但是相关数据没有被清理，仍然驻留在系统中。
        - **转移**
            - ![](/images/by-name/process/process-state-transition.svg)
            - 运行态 to 阻塞态：启动 IO 设备，导致进程需要等待。
            - 阻塞态 to 就绪态：IO 完成，设备发生中断，中断处理程序把阻塞进程改为就绪。
            - 运行态 to 就绪态：调度被抢占或进程主动让出。
            - 就绪态 to 运行态：进程被分配到 CPU。
    - **组织方式**
        - 线性表：PCB 都放在一个数组中。
        - 链表：PCB 之间用指针相连。
            - 可以拆分为多个链表，每个链表表示不同状态。
            - 对于阻塞态进程，可以按照阻塞原因继续拆分链表。
- **控制**
